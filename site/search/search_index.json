{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Homepage","text":""},{"location":"#about","title":"About","text":"<p>Data architecture mapping specifications for data product dp-c3fn-packaging</p> <p>For full documentation visit mkdocs.org.</p>"},{"location":"#mapping-specs","title":"Mapping specs","text":""},{"location":"#stage","title":"Stage","text":""},{"location":"#rdv","title":"RDV","text":""},{"location":"#bdv","title":"BDV","text":"<p>ITEM_SPECIFICATION_COMPONENT_BR</p>"},{"location":"#pl","title":"PL","text":""},{"location":"#ddls","title":"DDL'S","text":""},{"location":"#packaging-diagrams","title":"Packaging Diagrams","text":""},{"location":"#dimensional-model","title":"Dimensional Model","text":""},{"location":"#stage-to-pl-flow","title":"Stage to PL Flow","text":""},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"3.%20BDV/ITEM_SPECIFICATION_COMPONENT_BR/","title":"ITEM_SPECIFICATION_COMPONENT_BR","text":"<p>Last Edited: 24/04/2022</p>"},{"location":"3.%20BDV/ITEM_SPECIFICATION_COMPONENT_BR/#description","title":"Description","text":"<p>This object is the atomic level bridge table for packaging. Containing both Evolve Food and Valpak, this performs all the cleaning and calculations that need to take place prior to being consumed in the PL layer. This object supports <code>FACT_ITEM_SPECIFICATION_COMPONENT</code> and <code>AGG_ITEM_PRIMARY_PLASTICS</code>.</p>"},{"location":"3.%20BDV/ITEM_SPECIFICATION_COMPONENT_BR/#jira-tickets","title":"Jira Tickets","text":"Jira Ticket Description Function PFBP_295 Core object build Engineering PFBP_381 Analysis for adding in fulfilment channel and calendar reporting Architecture"},{"location":"3.%20BDV/ITEM_SPECIFICATION_COMPONENT_BR/#selection-criteria","title":"Selection Criteria","text":"<p>This BDV object contains two sources, as a result we must identify which data we want to take from each source and ensure no duplication in the data. We are also only concerned with own brand items. Valpak is GM, plus loose food &amp; bakery, Evolve is all other food items. Filter criteria is based from ADW_PRODUCT_PL.DIM_ITEM</p> <p>Own Brand Criteria <pre><code>OWN_BRAND_FLAG = 'Y'\n</code></pre> Valpak Criteria <pre><code>BUSINESS_UNIT_CD IN (5699,3210)\nSUB_CAT_CD IN (184,319,325,350,353,438,468,502,503,533,607,654,849,850,856,876,877,880,881,882,883,884,886,887,888,889,891,892,893,894,895,896,912,913,929,943)  \nELSE SUB_CAT_CD\n</code></pre> Evolve Criteria <pre><code>BUSINESS_UNIT_CD IN (5699,3210)\nSUB_CAT_CD NOT IN (184,319,325,350,353,438,468,502,503,533,607,654,849,850,856,876,877,880,881,882,883,884,886,887,888,889,891,892,893,894,895,896,912,913,929,943)\n</code></pre></p>"},{"location":"3.%20BDV/ITEM_SPECIFICATION_COMPONENT_BR/#target-to-source","title":"Target to Source","text":"<p>These tables are assumed to be unioned in the spec and will have the name OP, AP and VALPAK as aliases:</p> <ul> <li><code>ADW_PRODUCT_TRAN.ITEM_PACKAGING_COMPONENT_VALPAK_HIST_BR_LOGIC_2</code> as <code>VALPAK</code></li> <li><code>ADW_RDV.ADVANCED_PACKAGING_COMPONENT_LINK</code> as <code>AP</code></li> <li><code>ADW_RDV.ITEM_SPECIFICATION_ITEM_PACKAGING_COMPONENT_LINK</code> as <code>OP</code></li> </ul> <p>Target system for this object is ADW_BDV.</p> Target Target Column Transformation/Mapping rules Source System Source Source Column ITEM_SPECIFICATION_COMPONENT_BR ITEM_CD . ADW_PRODUCT_PL AGG_FINANCE_PNL_METRIC ITEM_CD ITEM_SPECIFICATION_COMPONENT_BR SPECIFICATION_VERSION_CD . ADW_PRODUCT_TRAN VALPAK SPECIFICATION_VERSION_SK_CD . . . ADW_RDV AP &amp; OP CONCAT(ITEM_SPEC_NK1,ITEM_SPEC_NK2) ITEM_SPECIFICATION_COMPONENT_BR PACKAGING_COMPONENT_CD Direct Map ADW_PRODUCT_TRAN VALPAK PACKAGING_VALPAK_SK_CD . . Concat of all primary keys to give unique row per component ADW_RDV AP &amp; OP CONCAT(ITEM_NK1,ITEM_SPEC_NK1,ITEM_SPEC_NK2,ITEM_PACKAGING_CD,ITEM_PACKAGING_COMPONENT_CD) ITEM_SPECIFICATION_COMPONENT_BR ENTERPRISE_SUPPLIER_CD Lookup ALPHANUMERIC_SUPPLIER_CD to return ENTERPRISE_SUPPLIER_CD ADW_PRODUCT_PL DIM_ENTERPRISE_SUPPLIER ENTERPRISE_SUPPLIER_CD ITEM_SPECIFICATION_COMPONENT_BR ALPHANUMERIC_SUPPLIER_CD Direct Map ADW_PRODUCT_TRAN VALPAK ALPHANUMERIC_SUPPLIER_CD nan nan Direct Map ADW_RDV ITEM_SPECIFICATION_SUPPLIER_SITE_LINK ITEM_SUPPLIER_CD ITEM_SPECIFICATION_COMPONENT_BR RECYCLING_ADVICE_CD See mapping step 9 for details. ADW_PRODUCT_TRAN EVOLVE_VALPAK_RECYCLE_ADVICE_REF RECYCLING_ADVICE_CD ITEM_SPECIFICATION_COMPONENT_BR COUNTRY Lookup against DIM_LOCATION for country ADW_PRODUCT_PL AGG_FINANCE_PNL_METRIC SALES_INITIATED_LOCATION_CD ITEM_SPECIFICATION_COMPONENT_BR FULFILMENT_CHANNEL_CD Direct Map ADW_PRODUCT_PL AGG_FINANCE_PNL_METRIC FULFILMENT_CHANNEL_CD ITEM_SPECIFICATION_COMPONENT_BR TRAN_DT Date filter needs to accommodate for both 26 financial periods and 24 calendar months. ADW_PRODUCT_PL AGG_FINANCE_PNL_METRIC TRAN_DT ITEM_SPECIFICATION_COMPONENT_BR COMPONENT_WEIGHT No calculation for Valpak ADW_PRODUCT_TRAN VALPAK AVERAGE_PACKAGING_COMPONENT_WEIGHT . . See mapping step 3 for details. ADW_RDV AP PACKAGING_COMPONENT_COMPONENT_WEIGHT_GRAMS . . . ADW_RDV OP COMPONENT_WEIGHT ITEM_SPECIFICATION_COMPONENT_BR COMPONENT_RECYCLED_WEIGHT Direct Map ADW_PRODUCT_TRAN VALPAK AVERAGE_PACKAGING_RECYCLED_WEIGHT . . Direct Map ADW_RDV AP PACKAGING_DETAIL_WEIGHT_OF_RECYCLED_GRAMS . . Apply recycled weight calculationn found in mapping step 3. ADW_RDV OP RECYCLED_WEIGHT ITEM_SPECIFICATION_COMPONENT_BR RECYCLED_WEIGHT_PCT Direct Map ADW_PRODUCT_TRAN VALPAK RECYCLED_WEIGHT_PCT . . Direct Map ADW_RDV AP PACKAGING_DETAIL_WEIGHT_OF_RECYCLED_GRAMS . . Direct Map ADW_RDV OP RECYCLED_PERCENT ITEM_SPECIFICATION_COMPONENT_BR SALES_VOLUME Sales volume/no. of components within a spec &amp; version ADW_PRODUCT_PL AGG_FINANCE_PNL_METRIC NET_SALES_VOLUME ITEM_SPECIFICATION_COMPONENT_BR TOTAL_TONNAGE Sales Volume * Component Weight/ 1000000 . . . ITEM_SPECIFICATION_COMPONENT_BR RECYCLED_TONNAGE Sales Volume * Recycled Weight/ 1000000 . . . ITEM_SPECIFICATION_COMPONENT_BR TECHNICAL_METADATA Include all metadata columns even if empty . . ."},{"location":"3.%20BDV/ITEM_SPECIFICATION_COMPONENT_BR/#mapping-steps","title":"Mapping Steps","text":"<ol> <li>Filter both Valpak and Evolve sources using the selection criteria given to ensure correct data and no duplication into the final table.</li> <li>Get item spec, version, supplier, item_cd for active specs from:<ol> <li>ITEM_SPEC_NK1, ITEM_SPEC_NK2 from ITEM_SPECIFICATION_EVOLVE_SAT</li> <li>ITEM_SUPPLIER_CD from ITEM_SUPPLIER_SITE_LINK<ol> <li> Supplier Cleaning Remove Dummy Supplier <pre><code>Remove ITEM_SUPPLIER_CD = I0055 when ITEM_SPEC_TITLE contains DO NOT USE\n</code></pre> Clean Evolve Supplier Codes <pre><code>Trim any supplier codes that end in -1  \nRemove ITEM_SUPPLIER_CD:  \nXA11115 (Dummy Code)  \n200435 (GM Supplier)  \n210206 (GM Supplier)\n</code></pre> </li> <li>Get ITEM_CD from TS_BDV_ITEM_PACKAGING_COMPONENT_AVG_WEIGHT_HIST_BR_01</li> </ol> </li> </ol> </li> <li>Combine OP &amp; AP together to retrieve all necessary component level data for the object build.</li> <li>Apply calculations and transformations on packaging data weights. See calculations section for more detail. <ol> <li> Calculations Secondary An item has secondary packaging, this is not sold to the consumer and will be for example a box containing multiple skus. We must divide the weight of this secondary component to give an actual value sold per item as to not inflate the overall packaging weight of the item. <pre><code>COMPONENT_WEIGHT / CASE_CRATE_SHIPPER_QTY\nExample :\nCase component weight = 352.59 g\nCase crate shipper quantity = 12\nSecondary Calculated weight = 352.59/12 = 29.3 g\n</code></pre> Tertiary Similar to the secondary calculation there is also tertiary packaging. This will usually be the pallet and any materials used to secure the pallet. Again we need to divide the weights to provide a correct weight per item. <pre><code>COMPONENT_WEIGHT / (CASE_CRATE_SHIPPER_QTY * TOTAL_CASES_PER_PALLET_LAYER_QTY)\nExample :\nStretch Wrap component weight = 250\nCase crate shipper quantity = 12\nCase crate total cases per pallet = 42\nTertiary Calculated weight = 250/(12*42) = 0.49603 g\n</code></pre> Multipack Calculation This is the opposite of the previous two calculations. When we sell multipacks the weight assigned is only equivalent to one item. In this case we must multiply the weight by the no. of items in the pack. <pre><code>CONSUMER_PACK_QTY * COMPONENT_WEIGHT\nExample :\nComponent weight from Evolve for bottle = 34 gm\nCalculated Weight for Bottle = 4 * 34 gm = 136 gm\n</code></pre> Recycled Weight Calculation <pre><code>Calculated Recycled Content Weight =% Recycled Content * Calculated Component Weight\n</code></pre> Multiple supplier component Calculation A spefication and version has multiple suppliers of a component, for example in our data we will have three entries against a bottle, however only one bottle will have sold in the store. Therefore we have to take this into consideration when building both fact views. For packaging we have worked out the average value of the three components, then divided by the no. of components to give an accurate figure when rolling up to the views consumed by the business: <pre><code>Bottle 32g,Bottle 36g, Bottle 33g\nAverage value = 33.6 g / 3 = 11.2 g\n</code></pre> </li> </ol> </li> <li>Get NET_SALES_VOLUME, ITEM_CD, SALES_INITIATED_LOCATION_CD, FULFILMENT_CHANNEL_CD from AGG_FINANCE_PNL_METRIC to be able to combine sales data with packaging for tonnage statistics.</li> <li>Add in country data to BR table by looking up SALES_INITIATED_LOCATION_CD against LOCATION_CD in DIM_LOCATION.</li> <li>Apply stock and sales logic to allow weighting sales volume for multiple suppliers of an item.<ol> <li> Stock &amp; Sales Logic <pre><code>Combine FACT_STORE_DELIVERY_ITEM &amp; FACT_DEPOT_STOCK to retrieve ITEM_CD, SUPPLIER_CD, STOCK_DT, SUPPLIER_QUANTITY\n</code></pre> </li> </ol> </li> <li>Combine sales data with packaging data.</li> <li>Add Valpak data into BR table.</li> <li>Apply tonnage calculations with sales and packaging data.</li> <li>Apply recycling advice cleaning to Evolve &amp; Valpak. Lookup adw_product_tran.evolve_valpak_recycle_advice_ref and return the cleaned column in the table output.</li> <li>Load transform schema to table.</li> <li>End.</li> </ol>"},{"location":"3.%20BDV/ITEM_SPECIFICATION_COMPONENT_BR/#diagram","title":"Diagram","text":"<pre><code>flowchart LR\nsubgraph \"Get Item, Supplier &amp; Active Specifications\"\na(\"`Supplier Site`\")\nb(\"`Evolve Sat`\")\nc(\"Active Specs\")\na-- ITEM_NK1,ITEM_NK2 --&gt;c\nb-- ITEM_NK1,ITEM_NK2 --&gt;c\nend \nsubgraph \"Get Packaging Details\"\nd(advanced packaging)\ne(original packaing)\nf(((union)))\ng(apply packaging calculations)\nd--&gt;f\ne--&gt;f\nf--&gt;g\nend\nsubgraph \"Get Finance Data\"\nh(AGG_FINANCE_PNL_METRIC)\ni(DIM_LOCATION)\nj(Retrieve country info)\nr(CTE containing ITEM,SALE DATE,SALES VOLUME, CHANNEL, COUNTRY)\nh-- SALES_INITIATED_LOCATION_CD --&gt;j\ni-- SALES_INITIATED_LOCATION_CD --&gt;j\nj--&gt;r\nend\nsubgraph \"Apply Stock &amp; Depot Logic\"\nk(FACT_STORE_DELIVERY_ITEM)\nl(FACT_DEPOT_STOCK)\nm(((union)))\nn(CTE containing Supplier,Date,Supplier Weights)\nk--&gt;m\nl--&gt;m\nm--&gt;n\nend\np[Combine Specs &amp; Packaging]\ng--&gt;p\nc--&gt;p\nq[Combine Packaging With Sales]\nr--&gt;q\np--&gt;q\ns[Apply Supplier Splits]\nq--&gt;s\nn--&gt;s\nt[Apply Final Tonnage Calculations]\ns--&gt;t\nu(ITEM_SPECIFICATION_COMPONENT_BR)\nt--&gt;u\nx(Valpak)\nx--&gt;t</code></pre>"},{"location":"3.%20BDV/ITEM_SPECIFICATION_COMPONENT_BR/#tests-checks","title":"Tests &amp; Checks","text":"<p>Original Tests:</p> <ul> <li> Secondary &amp; Tertiary calculations applied</li> <li> Multipack calculations applied</li> <li> Supplier weighting applied</li> <li> Sales volume is the same in br table as source</li> <li> Tonnage and recycled tonnage calculations are verified</li> </ul> <p>New Tests:</p> <ul> <li> Fulfilment channel &amp; Tran_DT incorporated into table</li> <li> Enhanced supplier cleaning added</li> <li> New filter conditions for TRAN_DT from AGG_FINANCE_PNL_METRIC have been applied</li> </ul>"},{"location":"4.%20PL/AGG_ITEM_PRIMARY_PLASTICS/","title":"AGG_ITEM_PRIMARY_PLASTICS","text":"<p>Last Edited: 24/04/2022</p>"},{"location":"4.%20PL/AGG_ITEM_PRIMARY_PLASTICS/#description","title":"Description","text":"<p>This object is the atomic level fact view for packaging. Containing component level data, this view intends to analyse all packaging types at all packaging levels. The view is set to calendar month to aid in EPR reporting.</p>"},{"location":"4.%20PL/AGG_ITEM_PRIMARY_PLASTICS/#jira-tickets","title":"Jira Tickets","text":"Jira Ticket Description Function PFBP_381 Analysis for adding in fulfilment channel and calendar reporting Architecture"},{"location":"4.%20PL/AGG_ITEM_PRIMARY_PLASTICS/#selection-criteria","title":"Selection Criteria","text":"<p>This object is built from ITEM_SPECIFICATION_COMPONENT_BR, that tables time granulairty is date. For this view calendar month is required, lookup TRAN_DT against DIM_DATE.DATE_DT and return CALNDR_PERIOD_NUM.</p>"},{"location":"4.%20PL/AGG_ITEM_PRIMARY_PLASTICS/#target-to-source","title":"Target to Source","text":"Source System Source Table/Xpath/JSON Schema/Other Source Column Transformation/Mapping rules Target System Target Table/Xpath/JSON Schema/Other Target Column ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR ITEM_CD Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT ITEM_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR SPECIFICATION_VERSION_CD Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT SPECIFICATION_VERSION_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR nan Concat of ITEM_CD, SPECIFICATION_VERSION_CD, PACKAGING_CD, COMPONENT_CD ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT PACKAGING_COMPONENT_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR ALPHANUMERIC_SUPPLIER_CD Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT ALPHANUMERIC_SUPPLIER_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR RECYCLING_ADVICE_ICON Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT RECYCLING_ADVICE_ICON ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR COUNTRY Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT COUNTRY ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR TRAN_DT See selection criteria ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT CALNDR_PERIOD_NUM ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR FULFILMENT_CHANNEL_CD Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT FULFILMENT_CHANNEL_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR COMPONENT_WEIGHT Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT COMPONENT_WEIGHT ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR COMPONENT_RECYCLED_WEIGHT Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT COMPONENT_RECYCLED_WEIGHT ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR RECYCLED_WEIGHT_PCT Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT RECYCLED_WEIGHT_PCT ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR SALES_VOLUME Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT SALES_VOLUME ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR TOTAL_TONNAGE Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT TOTAL_TONNAGE ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR RECYCLED_TONNAGE Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT RECYCLED_TONNAGE"},{"location":"4.%20PL/AGG_ITEM_PRIMARY_PLASTICS/#mapping-steps","title":"Mapping Steps","text":""},{"location":"4.%20PL/AGG_ITEM_PRIMARY_PLASTICS/#diagram","title":"Diagram","text":"<p>Not required for this build</p>"},{"location":"4.%20PL/AGG_ITEM_PRIMARY_PLASTICS/#tests-checks","title":"Tests &amp; Checks","text":""},{"location":"4.%20PL/FACT_ITEM_SPECIFICATION_COMPONENT/","title":"FACT_ITEM_SPECIFICATION_COMPONENT","text":"<p>Last Edited: 24/04/2022</p>"},{"location":"4.%20PL/FACT_ITEM_SPECIFICATION_COMPONENT/#description","title":"Description","text":"<p>This object is the atomic level fact view for packaging. Containing component level data, this view intends to analyse all packaging types at all packaging levels. The view is set to calendar month to aid in EPR reporting.</p>"},{"location":"4.%20PL/FACT_ITEM_SPECIFICATION_COMPONENT/#jira-tickets","title":"Jira Tickets","text":"Jira Ticket Description Function PFBP_381 Analysis for adding in fulfilment channel and calendar reporting Architecture"},{"location":"4.%20PL/FACT_ITEM_SPECIFICATION_COMPONENT/#selection-criteria","title":"Selection Criteria","text":"<p>This object is built from ITEM_SPECIFICATION_COMPONENT_BR, that tables time granulairty is date. For this view calendar month is required, lookup TRAN_DT against DIM_DATE.DATE_DT and return CALNDR_PERIOD_NUM.</p>"},{"location":"4.%20PL/FACT_ITEM_SPECIFICATION_COMPONENT/#target-to-source","title":"Target to Source","text":"Source System Source Table/Xpath/JSON Schema/Other Source Column Transformation/Mapping rules Target System Target Table/Xpath/JSON Schema/Other Target Column ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR ITEM_CD Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT ITEM_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR SPECIFICATION_VERSION_CD Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT SPECIFICATION_VERSION_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR nan Concat of ITEM_CD, SPECIFICATION_VERSION_CD, PACKAGING_CD, COMPONENT_CD ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT PACKAGING_COMPONENT_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR ALPHANUMERIC_SUPPLIER_CD Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT ALPHANUMERIC_SUPPLIER_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR RECYCLING_ADVICE_ICON Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT RECYCLING_ADVICE_ICON ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR COUNTRY Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT COUNTRY ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR TRAN_DT See selection criteria ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT CALNDR_PERIOD_NUM ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR FULFILMENT_CHANNEL_CD Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT FULFILMENT_CHANNEL_CD ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR COMPONENT_WEIGHT Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT COMPONENT_WEIGHT ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR COMPONENT_RECYCLED_WEIGHT Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT COMPONENT_RECYCLED_WEIGHT ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR RECYCLED_WEIGHT_PCT Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT RECYCLED_WEIGHT_PCT ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR SALES_VOLUME Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT SALES_VOLUME ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR TOTAL_TONNAGE Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT TOTAL_TONNAGE ADW_BDV ITEM_SPECIFICATION_COMPONENT_BR RECYCLED_TONNAGE Direct from BR ADW_PRODUCT_PL FACT_ITEM_SPECIFICATION_COMPONENT RECYCLED_TONNAGE"},{"location":"4.%20PL/FACT_ITEM_SPECIFICATION_COMPONENT/#mapping-steps","title":"Mapping Steps","text":""},{"location":"4.%20PL/FACT_ITEM_SPECIFICATION_COMPONENT/#diagram","title":"Diagram","text":"<p>Not required for this build</p>"},{"location":"4.%20PL/FACT_ITEM_SPECIFICATION_COMPONENT/#tests-checks","title":"Tests &amp; Checks","text":""},{"location":"DDL/ddl/","title":"Ddl","text":""},{"location":"DDL/ddl/#item_specification_component_br","title":"ITEM_SPECIFICATION_COMPONENT_BR","text":"<pre><code>CREATE OR REPLACE TABLE ADW_BDV.ITEM_SPECIFICATION_COMPONENT_BR\n(\nITEM_CD                   number(38,0) NOT NULL COMMENT 'ITEM code',\nSPECIFICATION_VERSION_CD  varchar NOT NULL COMMENT 'Spec &amp; Version',\nPACKAGING_CD              varchar NOT NULL COMMENT 'Packaging code.',\nCOMPONENT_CD              varchar NOT NULL, COMMENT 'Component code',\nALPHANUMERIC_SUPPLIER_CD  varchar NOT NULL COMMENT 'Alphanumeric Supplier Code',\nENTERPRISE_SUPPLIER_CD    varchar NOT NULL, COMMENT 'Enterprise Code',\nRECYCLING_ADVICE_ICON     varchar NOT NULL COMMENT 'Recycling Advice',\nCOUNTRY                   varchar NOT NULL COMMENT 'Country',\nTRAN_DT                   date NOT NULL COMMENT 'Sales transaction date.',\nFULFILMENT_CHANNEL_CD     number(38,0) NOT NULL COMMENT 'The channel of the sale e.g. in store',\nCOMPONENT_WEIGHT          number(38,2) COMMENT 'Weight of each component.',\nCOMPONENT_RECYCLED_WEIGHT number(38,2) COMMENT 'Weight of recycled content in the component.',\nRECYCLED_WEIGHT_PCT       number(38,2) COMMENT 'Recycled weight percentage',\nSALES_VOLUME              number(38,0) COMMENT 'Unit sales by item divided by the no of components in each spec &amp; version.',\nTOTAL_TONNAGE             number(38,2) COMMENT 'Calculation to show plastic tonnage output.',\nRECYCLED_TONNAGE          number(38,2) COMMENT 'Calculation for recycled tonnage.',\nTECHNICAL_METADATA        variant NOT NULL COMMENT 'A JSON message of support fields. See Aspire modelling standards. Can be any of these: BATCH_ID\nRECORD_ARRIVAL_TS\nETL_FRAMEWORK\nHASH_DIFF\nJOB_NAME\nLOAD_TS\nREASON_CD\nRECORD_DELETED_FLAG\nSOURCE_PATH\nSOURCE_SYSTEM_CD\nRECORD_ID\nVALID_FROM_TS\nVALID_TO_TS',\nCONSTRAINT ITEM_SPECIFICATION_COMPONENT_BR PRIMARY KEY ( ITEM_CD, SPECIFICATION_VERSION_CD, PACKAGING_CD, COMPONENT_CD, ALPHANUMERIC_SUPPLIER_CD, ENTERPRISE_SUPPLIER_CD, RECYCLING_ADVICE_ICON, COUNTRY, TRAN_DT, FULFILMENT_CHANNEL_CD )\n)\nCOMMENT = 'This table combines Valpak &amp; Evolve packaging data with sales to calculate the plastic and other material output in tonnes.';\n</code></pre>"},{"location":"DDL/ddl/#agg_item_primary_plastics","title":"AGG_ITEM_PRIMARY_PLASTICS","text":"<pre><code>CREATE OR REPLACE VIEW ADW_PRODUCT_PL.AGG_ITEM_PRIMARY_PLASTICS\n(\nITEM_CD              COMMENT 'ITEM code',\nGROUP_SUPPLIER_CD    COMMENT 'Group Supplier Code',\nRECYCLING_ADVICE_CD  COMMENT 'Recycling Advice',\nCOUNTRY              COMMENT 'Country',\nCALNDR_PERIOD_NUM    COMMENT 'Calendar month.',\nITEM_WEIGHT          COMMENT 'Weight of the items components.',\nITEM_RECYCLED_WEIGHT COMMENT 'Weight of recycled content in the item.',\nRECYCLED_WEIGHT_PCT  COMMENT 'Percentage of the recycled content.',\nSALES_VOLUME         COMMENT 'Sales units.',\nTOTAL_TONNAGE        COMMENT 'Calculation to show plastic tonnage output.',\nRECYCLED_TONNAGE     COMMENT 'Calculation for recycled tonnage.',\nRECYCLABILITY_PCT    COMMENT 'Calculation for showing how much of the item can be recycled in future.'\n)\nCOMMENT = 'An aggregated table based off ITEM_SPECIFICATION_COMPONENT_BR to fit the requirements of the Plan for Better Commercial dashboard.';\n</code></pre>"},{"location":"DDL/ddl/#fact_item_specification_component","title":"FACT_ITEM_SPECIFICATION_COMPONENT","text":"<pre><code>CREATE OR REPLACE VIEW ADW_PRODUCT_PL.FACT_ITEM_SPECIFICATION_COMPONENT\n(\nITEM_CD                   COMMENT 'ITEM code',\nSPECIFICATION_VERSION_CD  COMMENT 'Spec &amp; Version',\nPACKAGING_COMPONENT_CD    COMMENT 'Packaging Code.',\nENTERPRISE_SUPPLIER_CD    COMMENT 'Alphanumeric Supplier Code',\nRECYCLING_ADVICE_CD       COMMENT 'Recycling Advice',\nCOUNTRY                   COMMENT 'Country',\nCALNDR_PERIOD_NUM         COMMENT 'Sales transaction month.',\nFULFILMENT_CHANNEL_CD     COMMENT 'Channel of the sale e.g. in store',\nCOMPONENT_WEIGHT          COMMENT 'Weight of each component.',\nCOMPONENT_RECYCLED_WEIGHT COMMENT 'Weight of recycled content in the component.',\nRECYCLED_WEIGHT_PCT       COMMENT 'Recycled weight percentage',\nSALES_VOLUME              COMMENT 'Unit sales by item divided by the no of components in each spec &amp; version.',\nTOTAL_TONNAGE             COMMENT 'Calculation to show plastic tonnage output.',\nRECYCLED_TONNAGE          COMMENT 'Calculation for recycled tonnage.',\n)\nCOMMENT = 'This table combines Valpak &amp; Evolve packaging data with sales to calculate the plastic and other material output in tonnes.';\n</code></pre>"}]}